# Penetration Testing MQTT Protocol

## How to do it?!

Penetration testing of the MQTT protocol involves a systematic approach to assess its security posture. The first phase, information gathering, entails comprehensive research to understand the MQTT implementation, identifying potential entry points, and enumerating available resources. Subsequently, authentication and authorization mechanisms are scrutinized, ensuring that only authorized entities can access and perform actions within the MQTT infrastructure. Common vulnerabilities are proactively tested to uncover weaknesses that could be exploited by malicious actors. The evaluation extends to data privacy and encryption measures, confirming the robustness of safeguards in place to protect sensitive information. Message inspection is a critical aspect, involving the analysis of message formats, payloads, and potential injection points for vulnerabilities. Denial of Service (DoS) and Distributed Denial of Service (DDoS) testing simulate adverse scenarios to gauge the system's resilience under intense network traffic. Lastly, the examination of logging and monitoring mechanisms is crucial to identify any gaps in tracking and responding to security incidents promptly. Through this holistic approach, the penetration testing of MQTT ensures a comprehensive evaluation of its security architecture:

|         Step       |									Tools					|      Command                   |
|----------------|-------------------------------|-----------------------------|
|Gather Information|Nmap, Shodan, …          |nmap -p [port number] -sC -sV [IP]            |
|Test Authentication and Authorization          |Mosquitto_pub, Mosquitto_sub, mqttExplorer             |[ ]            |
|Test for Common Vulnerabilities        |Owasp ZAP, BurpSuite| msf6> (auxiliary) scanner/mqtt/scanner|
|Data Privacy and Encryption|WireShark, SSLyzer for TLS/SSL Scanning|[ ]
|Message Inspection|MQTT Explorer or MQTT.fx for visualizing and inspecting MQTT messages|[ ]
DoS and DDoS Testing|LOIC (Low Orbit Ion Cannon), CVE-2017-7651, CVE-2018-12543|https://github.com/mukkul007/MqttAttack
Logging and Monitoring|ELK Stack (Elasticsearch, Logstash, Kibana) for centralizing logs Nagios or Zabbix for monitoring MQTT broker health.|


## MQTT PWN - IOT Exploitation & Recon Framework

**MQTT pwn**:
https://github.com/akamai-threat-research/mqtt-pwn
[Feature Support](https://github.com/akamai-threat-research/mqtt-pwn#feature-support)
- Credential Brute-Forcer - configurable brute force password cracking to bypass authentication controls
- Topic Enumerator - establishing comprehensive topic list via continuous sampling over time
- Useful Information Grabber - obtaining and labeling data from an extensible predefined list containing known topics of interest
- GPS tracker - plotting routes from devices using OwnTracks app and collecting published coordinates
- Sonoff Exploiter – design to extract passwords and other sensitive information
- Extensibility - the framework was designed to add new custom plugins with ease
- Shodan - search through Shodan.io API for available vulnerable MQTT brokers




